if (self.CavalryLogger) { CavalryLogger.start_js(["1dI0mvO"]); }

__d("fetchVideoCastPayloadQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={defaultValue:null,kind:"LocalArgument",name:"castSessionID"},b={defaultValue:null,kind:"LocalArgument",name:"playerOrigin"},c={defaultValue:null,kind:"LocalArgument",name:"playerSubOrigin"},d={defaultValue:null,kind:"LocalArgument",name:"videoID"},e=[{kind:"Variable",name:"id",variableName:"videoID"}],f={alias:null,args:[{kind:"Variable",name:"cast_session_id",variableName:"castSessionID"},{kind:"Variable",name:"player_origin",variableName:"playerOrigin"},{kind:"Variable",name:"player_suborigin",variableName:"playerSubOrigin"}],kind:"ScalarField",name:"video_cast_payload",storageKey:null};return{fragment:{argumentDefinitions:[a,b,c,d],kind:"Fragment",metadata:null,name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:e,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[f],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[d,b,c,a],kind:"Operation",name:"fetchVideoCastPayloadQuery",selections:[{alias:null,args:e,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[f,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"3371354012963444",metadata:{},name:"fetchVideoCastPayloadQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("createTrustedScriptURLWithoutValidation_DO_NOT_USE",["TrustedTypes"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g="trusted-script-url-no-validation",h,i={createScriptURL:function(a){return a}};function j(){if(h)return;h=b("TrustedTypes").createPolicy(g,i)}function k(){h||j();return h}function a(a){return k().createScriptURL(a)}}),null);
__d("CastingChromecastAPI",["Promise","createTrustedScriptURLWithoutValidation_DO_NOT_USE","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=3*60*1e3,h=["pkedcjkdefgpdelpbcmbmeomcjbeemfm","hfaagokkkhdbgiakmmlclaapfelnkoah","fmfcbgogabcbclcofgocippekhfcmgfj","enhhojjnijigcajfphajepfemndkmdlo"],i=null;c=function(a){var c=a.appID,d=a.receiverListener,e=a.sessionListener;return l().then(function(a){var f=new a.ApiConfig(new a.SessionRequest(c),e,d,a.AutoJoinPolicy.ORIGIN_SCOPED,a.DefaultActionPolicy.CAST_THIS_TAB);return new(b("Promise"))(function(b,c){a.initialize(f,b,c)})})};d=function(a){return l().then(function(b){b.addReceiverActionListener(function(c,d){switch(d){case b.ReceiverAction.CAST:a.onCast(c);break;case b.ReceiverAction.STOP:a.onStop();break}})})};f=function(a){return l().then(function(c){var d=new c.SessionRequest(a,[c.Capability.VIDEO_OUT,c.Capability.AUDIO_OUT],g);return new(b("Promise"))(function(a,b){c.requestSession(a,b,d)})})};var j=function(a){return l().then(function(b){return a===b.ReceiverAvailability.AVAILABLE})},k=function(){return l().then(function(a){return a.media.DEFAULT_MEDIA_RECEIVER_APP_ID})},l=function(){if(i)return i;if(!a.chrome){i=b("Promise").reject({code:"not_supported",description:null,details:null});return i}if(a.chrome.cast&&a.chrome.cast.isAvailable){i=b("Promise").resolve(a.chrome.cast);return i}i=b("Promise").resolve().then(function(){return m()}).then(function(c){return new(b("Promise"))(function(d,e){a.chrome.cast=a.chrome.cast||{};a.chrome.cast.extensionId=c;a.__onGCastApiAvailable=function(b,c){c?e(c):d(a.chrome.cast)};if(c==null){e({code:"extension_not_available",description:null,details:null});return}var f=document.createElement("script");f.onerror=e;f.src=b("createTrustedScriptURLWithoutValidation_DO_NOT_USE")(o(c));var g=document.head||document.documentElement;if(g==null){e({code:"extension_no_casting_script",description:null,details:null});return}g.appendChild(f)})});return i};function m(){var a,c,d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<h.length)){e.next=11;break}c=h[a];e.next=5;return b("regeneratorRuntime").awrap(n(c));case 5:d=e.sent;if(!d){e.next=8;break}return e.abrupt("return",c);case 8:a++;e.next=1;break;case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},null,this)}function n(a){return new(b("Promise"))(function(b,c){c=o(a);var d=new XMLHttpRequest();d.onreadystatechange=function(){d.readyState===4&&b(d.status===200)};d.onerror=function(){b(!1)};d.open("GET",c,!0);d.send()})}function o(a){return"chrome-extension://"+a+"/cast_sender.js"}d={addReceiverListener:d,getDefaultAppID:k,getIsAvailable:j,getSession:f,initialize:c};k=d;e.exports=k}),null);
__d("CastingChromecastAPIWrapper",["cr:1885117"],(function(a,b,c,d,e,f){"use strict";a=b("cr:1885117");e.exports=a}),null);
__d("CastingChromecastSession",["Promise","err","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a,c,d){var e=this;this.$3=null;this.$4=[];this.$5=[];this.$6=[];this.$7=[];this.$8=[];this.$9=[];this.$10=[];this.$11=[];this.$12=function(a,c){if(a===e.$2){var d=e.$4.slice();d.forEach(function(a){a(c)})}else e.$6.slice().forEach(function(c){c(b("err")("Namespace does not match. Expected "+e.$2+" but received "+a),"CastingChromecastSession._onMessageReceived")})};this.$1=a;this.$2=c;this.$3=d;d.addMessageListener(this.$2,this.$12)}var c=a.prototype;c.destroy=function(){var a=this.$3;a!=null&&(a.status!=null&&a.status!=="disconnected"&&b("recoverableViolation")("Destroying receiver session that is not disconnected. Status, "+a.status,"comet_cast_sender"),a.removeMessageListener(this.$2,this.$12));this.$3=null};c.isCasting=function(){return this.$3!=null};c.isConnected=function(){return this.$3!=null&&this.$3.status==="connected"};c.isDisconnected=function(){return this.$3!=null&&this.$3.status==="disconnected"};c.disconnect=function(){var a=this;this.$5.slice().forEach(function(a){a()});return new(b("Promise"))(function(b,c){a.$3!=null?a.$3.stop(b,c):b()})["catch"](function(b){if(a.$3!=null&&a.$3.status!=="stopped"){a.$6.slice().forEach(function(a){a(b,"CastingChromecastSession.disconnect")});throw b}})["finally"](function(){var b=a.$3;a.$3=null;b&&b.removeMessageListener(a.$2,a.$12);a.$7.slice().forEach(function(a){a()})})};c.getVolume=function(){var a=this.$13();return a?a.level:null};c.getFriendlyName=function(){return this.$14()};c.setVolume=function(a){var c=this,d=this.$3;return new(b("Promise"))(function(c,e){if(d==null){e(b("err")("Cannot set volume without a session"));return}d.setReceiverVolumeLevel(a,c,e)})["catch"](function(a){c.$6.slice().forEach(function(b){b(a,"CastingChromecastSession.setVolume")});throw a})};c.isMuted=function(){var a=this.$13();return a?a.muted:null};c.mute=function(){return this.$15(!0)};c.unmute=function(){return this.$15(!1)};c.sendMessage=function(a){var c=this;return new(b("Promise"))(function(d,e){var f=c.$3;if(f==null){e(b("err")("The message can not be sent without a session"));return}f.sendMessage(c.$2,a,d,e)})["catch"](function(a){c.$6.slice().forEach(function(b){b(a,"CastingChromecastSession.sendMessage")});throw a})};c.$13=function(){var a;a=(a=this.$3)==null?void 0:(a=a.receiver)==null?void 0:a.volume;return a==null?null:a};c.$14=function(){var a;return((a=this.$3)==null?void 0:a.receiver.friendlyName)||null};c.$15=function(a){var c=this;return new(b("Promise"))(function(d,e){var f=c.$3;if(f==null){e(b("err")("The muted state can not be set without a session"));return}f.setReceiverMuted(a,d,e)})["catch"](function(a){c.$6.slice().forEach(function(b){b(a,"CastingChromecastSession._setIsMuted")});throw a})};c.onMessage=function(a){var c=this.$4;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onDisconnecting=function(a){var c=this.$5;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onError=function(a){var c=this.$6;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onDisconnected=function(a){var c=this.$7;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onVideoLoading=function(a){var c=this.$8;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onVideoLoaded=function(a){var c=this.$9;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onVideoPlaying=function(a){var c=this.$10;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onVideoPaused=function(a){var c=this.$11;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};return a}();e.exports=a}),null);
__d("CastingErrorUtils",["ErrorMetadata","err","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";f.isChromecastError=a;f.getCastingErrorSafe=c;f.appendCastingMetadataToExpandedError=d;function a(a,b){return a!=null&&typeof a==="object"&&typeof a.code==="string"&&a.code===b}function c(a){if(a!=null&&typeof a==="object"&&typeof a.code==="string"){var c=b("err")("Chromecast error: %s, keys: %s","cast.ChromecastError",JSON.stringify({code:a.code}));return c}return b("getErrorSafe")(a)}function d(a,c){a.metadata==null&&(a.metadata=new(b("ErrorMetadata"))());var d=a.metadata;c=c==null?void 0:c.videoID;c!=null&&d.addEntries(["COMET_VIDEO","VIDEO_ID",c]);return a}}),null);
__d("CastingChromecastScanner",["CastingChromecastAPIWrapper","CastingChromecastSession","CastingErrorUtils","ConnectedTvLoggingFalcoEvent","Promise","err","performanceAbsoluteNow","promiseDone","removeFromArray"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(a,b){this.$6=null,this.$7=[],this.$8=[],this.$9=[],this.$10=[],this.$11=[],this.$12=[],this.$13=[],this.$14=[],this.$15=[],this.$1=a,this.$2=b,this.$4=!1,this.$3=!1,this.$5=new Set()}var c=a.prototype;c.init=function(){if(this.$6!=null)return b("Promise").reject(b("err")("Scanner can only be initialized once."));this.$6=this.$16();return this.$6};c.ready=function(){return this.$6==null?b("Promise").reject(b("err")("Scanner should be initialized.")):this.$6};c.hasSupport=function(){return this.$3};c.hasFoundReceiver=function(){return this.$4};c.getSession=function(){var a=this;if(!this.$4)return b("Promise").reject(b("err")("No receivers found"));this.$13.slice().forEach(function(a){a()});return this.$17().then(function(b){var c=a.$18(b);a.$5.add(c);a.$14.slice().forEach(function(a){a(c)});return c})["catch"](function(b){a.$10.slice().forEach(function(a){a()});a.$11.slice().forEach(function(a){a()});throw b})};c.$16=function(){var a=this;this.$3=!0;return this.$19().then(function(b){return a.$20()}).then(function(b){a.$9.slice().forEach(function(a){a()})}).then(function(b){return a.$21()})["catch"](function(c){!b("CastingErrorUtils").isChromecastError(c,"not_supported")&&!b("CastingErrorUtils").isChromecastError(c,"extension_not_available")&&!b("CastingErrorUtils").isChromecastError(c,"extension_no_casting_script")&&a.$8.slice().forEach(function(a){a(c,"CastingChromecastScanner._init")});throw c})};c.$21=function(){var a=this,c=this.$1;if(c==null)return b("Promise").reject(b("err")("App ID is not defined"));var d=function(b){var c=a.$18(b);a.$14.slice().forEach(function(a){a(c)})},e=function(c){b("promiseDone")(b("CastingChromecastAPIWrapper").getIsAvailable(c).then(function(b){a.$4=b,a.$15.slice().forEach(function(b){b({foundReceiver:a.$4})})}))};return b("CastingChromecastAPIWrapper").initialize({appID:c,receiverListener:e,sessionListener:d}).then(function(){})["catch"](function(b){a.$8.slice().forEach(function(a){a(b,"CastingChromecastScanner._initializeApi")});throw b})};c.$19=function(){var a=this;return this.$1!=null?b("Promise").resolve():b("CastingChromecastAPIWrapper").getDefaultAppID().then(function(b){a.$1=b})};c.$17=function(){var a=this.$1;if(a==null)return b("Promise").reject(b("err")("App ID is not defined"));var c=(g||(g=b("performanceAbsoluteNow")))();b("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_requested"}});return b("CastingChromecastAPIWrapper").getSession(a).then(function(a){b("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_started",perf_time_ms:Math.floor((g||(g=b("performanceAbsoluteNow")))()-c)}});return a})["catch"](function(a){b("ConnectedTvLoggingFalcoEvent").log(function(){return{event:"sender_session_failed",perf_time_ms:Math.floor((g||(g=b("performanceAbsoluteNow")))()-c),session_failure_code:typeof a.code==="string"?a.code:null,session_failure_description:a.description}});throw a})};c.$18=function(a){var c=this,d=new(b("CastingChromecastSession"))(this.$1||"",this.$2||"",a),e=d.onDisconnecting(function(){c.$12.slice().forEach(function(a){a()})}),f=d.onError(function(a,b){c.$8.slice().forEach(function(c){c(a,b)})}),g=d.onDisconnected(function(){c.$11.slice().forEach(function(a){a()}),c.$5["delete"](d),e.remove(),f.remove(),g.remove()});return d};c.$20=function(){var a=this;return b("CastingChromecastAPIWrapper").addReceiverListener({onCast:function(b){a.$7.slice().forEach(function(a){a(b)})},onStop:function(){a.$5.forEach(function(a){return a.disconnect()})}})};c.onCast=function(a){var c=this.$7;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onError=function(a){var c=this.$8;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onInit=function(a){var c=this.$9;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionCancelled=function(a){var c=this.$10;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionDisconnected=function(a){var c=this.$11;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionDisconnecting=function(a){var c=this.$12;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionRequested=function(a){var c=this.$13;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionStarted=function(a){var c=this.$14;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onStatusChanged=function(a){var c=this.$15;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};return a}();e.exports=a}),null);
__d("fetchVideoCastPayload",["CometRelay","err","fetchVideoCastPayloadQuery.graphql","getErrorSafe"],(function(a,b,c,d,e,f){"use strict";e.exports=a;var g,h=g!==void 0?g:g=b("fetchVideoCastPayloadQuery.graphql");function a(a){var c=a.castSessionID,d=a.environment,e=a.playerOrigin,f=a.playerSubOrigin;a=a.videoID;return b("CometRelay").fetchQuery(d,h,{castSessionID:c,playerOrigin:e,playerSubOrigin:f,videoID:a}).toPromise().then(function(a){if(a==null||a.video==null||a.video.video_cast_payload==null)return{type:"video_cannot_be_casted"};else if(typeof a.video.video_cast_payload==="string")return{payload:a.video.video_cast_payload,type:"loaded"};else return{error:b("err")("Payload was not string"),type:"error"}})["catch"](function(a){a=b("getErrorSafe")(a);return{error:a,type:"error"}})}}),null);
__d("CastingController",["CastingErrorUtils","FBLogger","Promise","SubscriptionsHandler","err","fetchVideoCastPayload","getErrorSafe","performanceAbsoluteNow","promiseDone","recoverableViolation","removeFromArray"],(function(a,b,c,d,e,f){"use strict";var g,h=b("FBLogger")("connected_tv");function i(){return{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,nextVideoID:null,receiverExperience:null,receiverFriendlyName:null,receiverIsConnected:!1,receiverIsMuted:null,receiverVolume:null}}var j="ChannelVideo";a=function(){function a(a,c){var d=this;this.$4=[];this.$5=[];this.$7=function(){var a=i();d.$10(a)};this.$8=function(a){switch(a.type){case"status_update":d.$12(a);break;case"duration_change":d.$13(a);break;default:break}};this.$9=function(a,c){if(b("CastingErrorUtils").isChromecastError(a,"cancel"))h.warn("ChromecastError while casting. Received ChromecastError with cancel code.");else{var e;e=(e=d.$1)==null?void 0:e.currentVideoID;a=b("CastingErrorUtils").appendCastingMetadataToExpandedError(b("CastingErrorUtils").getCastingErrorSafe(a),babelHelpers["extends"]({},e!=null?{videoID:e}:{}));b("recoverableViolation")("Receiver error at "+c,"comet_cast_sender",{error:a});b("promiseDone")(d.$3.stopCasting())}};this.$1=i();this.$2=c;this.$3=a;this.$6=new(b("SubscriptionsHandler"))();this.$6.addSubscriptions(this.$3.onReceiverDisconnected(this.$7),this.$3.onSessionDisconnected(this.$7),this.$3.onSessionMessage(this.$8),this.$3.onError(this.$9))}var c=a.prototype;c.destroy=function(){this.$6.release()};c.getCastingState=function(){return this.$1};c.subscribeToCastingStateChange=function(a){var c=this;this.$4.push(a);return function(){b("removeFromArray")(c.$4,a)}};c.subscribeToCastingEvent=function(a){var c=this;this.$5.push(a);return function(){b("removeFromArray")(c.$5,a)}};c.startPlayVideoNow=function(a){var c=this,d=a.environment,e=a.origin,f=a.position,h=a.subOrigin,i=a.videoID;if(this.$1.nextVideoID!=null)return;this.$10(babelHelpers["extends"]({},this.$1,{nextVideoID:i}));this.$11({data:{type:"cast_requested",videoID:i},timestamp:(g||(g=b("performanceAbsoluteNow")))()});b("promiseDone")(b("Promise").all([b("fetchVideoCastPayload")({castSessionID:this.$2,environment:d,playerOrigin:e,playerSubOrigin:h,videoID:i}),this.$3.getSession().then(function(a){c.$10(babelHelpers["extends"]({},c.$1,{receiverIsConnected:!0}));return a})]).then(function(a){var d=a[0];a[1];if(d.type==="video_cannot_be_casted"){b("recoverableViolation")("The video is not eligible to be casted. The cast request is ignored.","comet_cast_sender",{error:b("CastingErrorUtils").appendCastingMetadataToExpandedError(b("err")("video_cannot_be_casted"),{videoID:i})});return b("Promise").resolve()}else if(d.type==="error"){b("recoverableViolation")("There was a failure retrieving video cast payload. Video failed to play.","comet_cast_sender",{error:b("CastingErrorUtils").appendCastingMetadataToExpandedError(d.error,{videoID:i})});return b("Promise").resolve()}a=c.$3.isCasting(j);a?a=c.$3.playVideoNow({position:f},d.payload):a=c.$3.startCasting(j,{position:f},d.payload);return a.then(function(){var a=babelHelpers["extends"]({},c.$1,{receiverFriendlyName:c.$3.getFriendlyName()||null,receiverIsMuted:c.$3.isMuted()||null,receiverVolume:c.$3.getVolume()||0});c.$10(a)})})["catch"](function(a){c.$11({data:{type:"cast_failed",videoID:i},timestamp:(g||(g=b("performanceAbsoluteNow")))()}),b("CastingErrorUtils").isChromecastError(a,"cancel")||b("recoverableViolation")("Failed to cast video.","comet_cast_sender",{error:b("CastingErrorUtils").appendCastingMetadataToExpandedError(b("getErrorSafe")(a),{videoID:i})})})["finally"](function(){var a=babelHelpers["extends"]({},c.$1,{nextVideoID:null});c.$10(a)}))};c.disconnect=function(){b("promiseDone")(this.$3.stopCasting())};c.play=function(){b("promiseDone")(this.$3.playVideo())};c.pause=function(){b("promiseDone")(this.$3.pauseVideo())};c.setVolume=function(a){b("promiseDone")(this.$3.setVolume(a))};c.mute=function(){b("promiseDone")(this.$3.mute())};c.unmute=function(){b("promiseDone")(this.$3.unmute())};c.seek=function(a){b("promiseDone")(this.$3.seekVideo(a))};c.$10=function(a){a!==this.$1&&(this.$1=a,this.$4.slice().forEach(function(b){b(a)}))};c.$11=function(a){this.$5.slice().forEach(function(b){b(a)})};c.$12=function(a){var c=this.$1,d=a.data.video_id,e=this.$3.getVolume()||0,f=this.$3.isMuted()||!1;d!=null&&this.$11({data:{playbackState:a.data.state,playerInfo:(a==null?void 0:a.player_info)||null,receiverInfo:(a==null?void 0:a.receiver_info)||null,type:"video_status_update",videoID:d},timestamp:(g||(g=b("performanceAbsoluteNow")))()});var h={receiverIsConnected:!0};if(d==null)this.$10(babelHelpers["extends"]({},c,h,{currentDuration:null,currentPlaybackState:null,currentPosition:null,currentVideoID:null,receiverIsMuted:f,receiverVolume:e}));else{h=babelHelpers["extends"]({},c,h,{currentDuration:a.data.duration!=null?a.data.duration:c.currentDuration,currentPlaybackState:a.data.state,currentPosition:a.data.position,currentVideoID:d,receiverIsMuted:f,receiverVolume:e});this.$10(h)}};c.$13=function(a){var b=this.$1;a=a.data.duration;if(b.currentVideoID==null)return;this.$10(babelHelpers["extends"]({},b,{currentDuration:a}))};return a}();e.exports=a}),null);
__d("CastingEventReporter",["ConnectedTvLoggingFalcoEvent"],(function(a,b,c,d,e,f){"use strict";a=function(){function a(a){var b=this;this.$4=function(a){switch(a.data.type){case"cast_requested":b.logWithAvailableContext({event:"cast_requested",video_id_override:a.data.videoID});b.$5(a);break;case"cast_failed":b.$5(a);break;case"video_status_update":b.$6(a.data.receiverInfo,a.data.playerInfo);b.$5(a);break;default:break}};this.$1=null;this.$2=null;this.$3={cast_session_id:a,is_google_cast_bg:null,third_party_app_id:null,tv_os_version:null,tv_player_instance_key:null,tv_player_version:null,tv_session_id:null,tv_web_client_revision:null}}var c=a.prototype;c.destroy=function(){this.$1!=null&&this.$1(),this.$1=null};c.bindToCastingController=function(a){this.$1=a.subscribeToCastingEvent(this.$4)};c.logWithAvailableContext=function(a){var c=this;b("ConnectedTvLoggingFalcoEvent").log(function(){return babelHelpers["extends"]({},c.$3,a)})};c.$5=function(a){switch(a.data.type){case"cast_requested":this.$2=a;break;case"cast_failed":var b=this.$2;this.logWithAvailableContext({event:"cast_failed",perf_time_ms:Math.floor(b!=null?a.timestamp-b.timestamp:0),video_id_override:a.data.videoID});this.$2=null;break;case"video_status_update":b=this.$2;if(b==null)break;var c=b.data.videoID;a.data.videoID===c&&a.data.playbackState==="play"?(this.logWithAvailableContext({event:"cast_started",perf_time_ms:Math.floor(a.timestamp-b.timestamp)}),this.$2=null):a.data.videoID!==c&&(this.$2=null);break}};c.$6=function(a,b){var c=(a==null?void 0:a.third_party_app_id)||null,d=(a==null?void 0:a.cast_receiver_logger_session_id)||null,e=(a==null?void 0:a.is_google_cast_bg)||null,f=(a==null?void 0:a.os_version)||null;a=(a==null?void 0:a.web_client_revision)||null;var g=(b==null?void 0:b.player_instance_key)||null;b=(b==null?void 0:b.player_version)||null;this.$3=babelHelpers["extends"]({},this.$3,{is_google_cast_bg:e,third_party_app_id:c,tv_os_version:f,tv_player_instance_key:g,tv_player_version:b,tv_session_id:d,tv_web_client_revision:a})};return a}();e.exports=a}),null);
__d("CastingReceiverManager",["CastingChromecastScanner","Promise","Random","SubscriptionsHandler","TV2CommsParseUtils","TV2MessageTypes","promiseDone","removeFromArray","unrecoverableViolation"],(function(a,b,c,d,e,f){"use strict";var g="1.2.0";a=function(){function a(a){var c=this;this.$5=null;this.$6=null;this.$10=null;this.$11=[];this.$12=[];this.$13=[];this.$14=[];this.$15=[];this.$16=[];this.$17=[];this.$18=[];this.$19=[];this.$4=new(b("CastingChromecastScanner"))(a,b("TV2MessageTypes").FBAPP_CAST_PROTOCOL_NAMESPACE);this.$2=null;this.$1=!1;this.$3=0;this.$6=null;this.$9=new Map();this.$20=new(b("SubscriptionsHandler"))();this.$20.addSubscriptions(this.$4.onStatusChanged(function(a){var b=a.foundReceiver;c.$15.slice().forEach(function(a){a(!!b)})}),this.$4.onSessionDisconnected(function(){c.$21(),c.$14.slice().forEach(function(a){a()})}),this.$4.onSessionStarted(function(a){c.$22(a)}),this.$4.onError(function(a,b){c.$11.slice().forEach(function(c){c(a,b)})}));this.$7=this.$4.init();b("promiseDone")(this.$7.then(function(){c.$2=!0,c.$1=!0,c.$13.slice().forEach(function(a){a()})},function(a){c.$2=!1,c.$12.slice().forEach(function(b){b(a)})}))}var c=a.prototype;c.ready=function(){return this.$7};c.hasSupport=function(){return this.$2};c.hasFoundReceiver=function(){return this.$4.hasFoundReceiver()};c.isCasting=function(a){var b=!!this.$5&&this.$5.isCasting();b&&a!=null&&(b=this.$6!=null&&this.$6.indexOf(a)>=0);return b};c.getSession=function(){var a=this;return this.ready().then(function(){var b=a.$5;b!=null&&!b.isConnected()&&a.$21()}).then(function(){if(a.$5)return a.$5;a.$8||(a.$8=a.$23());return a.$8})["catch"](function(b){a.$11.slice().forEach(function(a){a(b,"CastingReceiverManager.getSession")});throw b})["finally"](function(){a.$8=null})};c.startCasting=function(a,c,d){var e=this;return this.isCasting(a)?b("Promise").resolve():this.$24(a,c,d).then(function(a){a.success?e.$6=a.target:e.$6=null})};c.stopCasting=function(){var a=this;return!this.isCasting()?b("Promise").resolve():this.ready().then(function(){var b=a.$5;b!=null&&b.isDisconnected()&&a.$21();return a.$5}).then(function(a){return a==null?b("Promise").resolve(null):a.disconnect()}).then(function(){a.$21()})};c.playVideoNow=function(a,c){return!this.isCasting()?b("Promise").resolve():this.$25("next_video",babelHelpers["extends"]({},a,{auto_advance:!0}),c).then(function(){})};c.skipToNextVideo=function(){return!this.isCasting()?b("Promise").resolve():this.$25("skip_video").then(function(){})};c.playVideo=function(a){return!this.isCasting()?b("Promise").resolve():this.$25("play_video",{position:a||0}).then(function(){})};c.pauseVideo=function(){return!this.isCasting()?b("Promise").resolve():this.$25("pause_video").then(function(){})};c.seekVideo=function(a){return!this.isCasting()?b("Promise").resolve():this.$25("seek_video",{position:a}).then(function(){})};c.stopVideo=function(){return!this.isCasting()?b("Promise").resolve():this.$25("stop_video").then(function(){})};c.getFriendlyName=function(){return this.$5==null?null:this.$5.getFriendlyName()};c.getVolume=function(){return this.$5==null?null:this.$5.getVolume()};c.setVolume=function(a){if(!this.isCasting())return b("Promise").resolve();return this.$5==null?b("Promise").resolve():this.$5.setVolume(a)};c.isMuted=function(){if(!this.isCasting())return null;return this.$5==null?null:this.$5.isMuted()};c.mute=function(){if(!this.isCasting())return b("Promise").resolve();return this.$5==null?b("Promise").resolve():this.$5.mute()};c.unmute=function(){if(!this.isCasting())return b("Promise").resolve();return this.$5==null?b("Promise").resolve():this.$5.unmute()};c.$26=function(){var a=this,c=this.$27();return this.$28(function(a){return{data:{client_cast_session:c,version:g},num:a,target:"version",timestamp:Date.now(),type:"version_request"}}).then(function(b){var c=b.messageNum;return a.$29(function(a){return a.response_num===c})}).then(function(a){if(a.type!=="version_response")throw b("unrecoverableViolation")('Response message was not a "version_response"',"comet_cast_sender");if(a.data==null)throw b("unrecoverableViolation")("Version response is missing data","comet_cast_sender");return a.data})};c.$24=function(a,c,d){var e=this,f=this.$27();return this.$28(function(b){return{data:{client_cast_session:f,name:a,params:c,payload:d,version:g},num:b,target:"version_launch",timestamp:Date.now(),type:"version_launch"}}).then(function(a){var b=a.messageNum;return e.$29(function(a){return a.response_num===b})}).then(function(a){if(a.type!=="version_launch_response")throw b("unrecoverableViolation")('Response message was not a "version_launch_response"',"comet_cast_sender");if(a.data==null)throw b("unrecoverableViolation")("Version launch response is missing data","comet_cast_sender");return a.data})};c.$30=function(){var a=this;return this.$6!=null?b("Promise").resolve(this.$6):this.getSession().then(function(b){return a.$26()}).then(function(c){var d=null;typeof c.currently_running_experience==="object"&&(d=c.currently_running_experience);if(d==null)throw b("unrecoverableViolation")("Session has no target","comet_cast_sender");a.$6=d;return a.$6})};c.$27=function(){var a=null;localStorage&&(a=localStorage.getItem("CastingSessionKey"));a==null&&(a=b("Random").uint32().toString(16),localStorage&&localStorage.setItem("CastingSessionKey",a));return a};c.$28=function(a){var c=this.$3+=2;return this.getSession().then(function(d){if(d==null)throw b("unrecoverableViolation")("The message can not be sent without a session","comet_cast_sender");var e=a(c);return d.sendMessage(e)}).then(function(){return{messageNum:c}})};c.$29=function(a){return this.getSession().then(function(c){if(c==null)throw b("unrecoverableViolation")("The message cannot be received without a session","comet_cast_sender");return new(b("Promise"))(function(d,e){var f=c.onMessage(function(c){try{c=b("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(c);if(c.type==="version_response"||c.type==="version_launch_response"||c.type==="experience_state"||c.type==="command_result"){var g=!a||a(c);g&&(f.remove(),d(c))}}catch(a){f.remove(),e(a)}})})})};c.$25=function(a,c,d){var e=this;return this.$30().then(function(b){return e.$28(function(e){return{data:{cmd:a,params:c,payload:d},num:e,target:b,timestamp:Date.now(),type:"experience_command"}})}).then(function(a){var b=a.messageNum;return e.$29(function(a){return a.response_num===b})}).then(function(a){if(a.type!=="command_result")throw b("unrecoverableViolation")('Response message was not a "command_result"',"comet_cast_sender");return a.data})};c.$23=function(){var a=this;return this.$4.getSession().then(function(b){a.$5==null&&(a.$5=b);return a.$5})};c.$22=function(a){var c=this;this.$5=a;var d="extension";this.$8&&(d="site");b("promiseDone")(this.$26().then(function(e){var f=e.success;if(!f)return;var g=null;typeof e.currently_running_experience==="object"&&(g=e.currently_running_experience);g!=null&&(c.$6=g);c.$18.slice().forEach(function(b){b(a,{session:a,source:d,success:f,target:c.$6})});c.$10=a.onMessage(function(a){try{var d=b("TV2CommsParseUtils").parseTV2CommsFBAppOutboundMessageFromJSON(a);c.$17.slice().forEach(function(a){a(d)})}catch(a){c.$11.slice().forEach(function(b){b(a,"CastingReceiverManager._onSessionStartedHandler")})}})}))};c.$21=function(){this.$10!=null&&(this.$10.remove(),this.$10=null);var a=this.$5;a!=null&&a.destroy();this.$5=null;this.$6=null};c.onError=function(a){var c=this.$11;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onExperienceNotSupported=function(a){var c=this.$12;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onExperienceReady=function(a){var c=this.$13;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onReceiverDisconnected=function(a){var c=this.$14;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onReceiverStatusChanged=function(a){var c=this.$15;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionDisconnected=function(a){var c=this.$16;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionMessage=function(a){var c=this.$17;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onSessionStarted=function(a){var c=this.$18;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};c.onStopView=function(a){var c=this.$19;c.push(a);return{remove:function(){b("removeFromArray")(c,a)}}};return a}();e.exports=a}),null);
__d("CastingControllerHooks",["CastingContext","CastingController","CastingEventReporter","CastingReceiverManager","ExecutionEnvironment","Promise","guid","qex","react","unrecoverableViolation","useIsCastingEnabled"],(function(a,b,c,d,e,f){"use strict";f.useCastingController=n;f.useIsCastAvailable=a;f.useCastingInitializeIfNecessary=c;var g,h=g||b("react"),i=null,j=b("qex")._("1879611");function k(){if(i!=null)return i;if(j==null)throw b("unrecoverableViolation")("Use useIsCastAvailable first to check if casting feature is available in this browser.","comet_cast_sender");var a=new(b("CastingReceiverManager"))(j),c=b("guid")(),d=new(b("CastingController"))(a,c);c=new(b("CastingEventReporter"))(c);c.bindToCastingController(d);i={castingController:d,castingEventReporter:c,castingReceiverManager:a};return i}function l(){var a=m();a=a.castingReceiverManager;return a}function m(){if(b("ExecutionEnvironment").canUseDOM)return k();throw new(b("Promise"))(function(){})}function n(){var a=m();a=a.castingController;return a}function a(){var a=l(),c=h.useContext(b("CastingContext").SetCastingControllerContext),d=b("useIsCastingEnabled")(),e=h.useState(!1),f=e[0],g=e[1];e=h.useState(!1);var i=e[0],k=e[1];h.useEffect(function(){var b=a.onExperienceReady(function(){g(a.hasSupport()||!1)});g(a.hasSupport()||!1);return function(){return b.remove()}},[a]);h.useEffect(function(){var b=a.onReceiverStatusChanged(function(){k(a.hasFoundReceiver()||!1)});k(a.hasFoundReceiver()||!1);return function(){return b.remove()}},[a]);if(!d)return!1;if(j==null)return!1;if(c==null)return!1;if(!f)return!1;return!i?!1:!0}function c(){var a=n(),c=h.useContext(b("CastingContext").SetCastingControllerContext);if(c==null)throw b("unrecoverableViolation")("Casting has to be initialized inside CastingProvider.","comet_cast_sender");h.useEffect(function(){c(a)},[c,a])}}),null);
__d("VideoPlayerCastControl.react",["fbt","ix","CastingControllerHooks","CometRelay","CometWatchAndScrollVideoContext","JSResourceForInteraction","VideoPlayerControlIcon.react","VideoPlayerHooks","emptyFunction","fbicon","react","recoverableViolation","useCometLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";e.exports=a;var i,j=i||b("react"),k=b("JSResourceForInteraction")("CometCastingStopWatchAndScrollDialog.react").__setRef("VideoPlayerCastControl.react");function l(a){var c=a.subOrigin;b("CastingControllerHooks").useCastingInitializeIfNecessary();var d=(a=b("VideoPlayerHooks").useVideoFbid())!=null?a:"",e=b("VideoPlayerHooks").useController(),f=b("CometRelay").useRelayEnvironment(),i=b("CastingControllerHooks").useCastingController();a=j.useContext(b("CometWatchAndScrollVideoContext"));var l=b("useCometLazyDialog")(k),m=l[0],n=a==null?void 0:a.videoID,o=j.useCallback(function(){if(d!=null){var a=e.getPlayheadPosition();i.startPlayVideoNow({environment:f,origin:"video_home",position:a,subOrigin:c,videoID:d})}else b("recoverableViolation")("Could not transition to Cast player because videoID was null","comet_video_player")},[i,f,c,e,d]);l=j.useCallback(function(){n!=null?m({onClose:b("emptyFunction"),onContinue:o,startingVideoType:"cast"},b("emptyFunction")):o()},[m,o,n]);a=g._("Transmitir video al televisor");return j.jsx(b("VideoPlayerControlIcon.react"),{color:"white",icon:b("fbicon")._(h("788899"),20),label:a,onPress:l,tooltip:a})}function a(a){a=a.subOrigin;var c=b("CastingControllerHooks").useIsCastAvailable();return!c?null:j.jsx(l,{subOrigin:a})}}),null);